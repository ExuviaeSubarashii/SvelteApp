<script lang="ts">
    import { onMount } from 'svelte';
  import {SetId} from '.././datas/songs'
import {GetUserPlayLists, exportedplaylists} from '../datas/playlists'
	import PlaylistOptions from './PlaylistOptions.svelte';
var playlists: any[] = [];

var selectedPlaylist: any = null;

  export let propertyState = false;

  function ChangeState(playlist: any) {
    selectedPlaylist = playlist;
    propertyState = !propertyState;
    console.log(propertyState);
  }


async function onComponentMount() {
  await GetUserPlayLists();
  playlists = exportedplaylists;
}
onMount(onComponentMount);
  </script>
  <div class="scrollable-container">
  {#if playlists.length>0}
  {#each playlists as playlist (playlist.playListId)}
  <hr>
  <div class="playlistSummary" tabindex="0" role="button" aria-pressed="false" id="{playlist.playListId}" on:contextmenu={() => ChangeState(playlist)}>
    <h3>
      <a class="playlistTitle" style="text-decoration: none;" href="/songs?id={encodeURIComponent(playlist.playListId)}" on:click={() => SetId(playlist.playListId)}>{playlist.playListTitle}</a>
    </h3>
    <h4 class="playlistOwner">{playlist.playListType} <i class='bx bxs-circle'></i> {playlist.playListOwner}</h4>
    <p class="playListCount">{playlist.playListCount} Songs</p>
      {#if propertyState}
        <PlaylistOptions />
      {/if}
  </div>
{/each}
    {:else}
    <div class="playlistSummary">
      <h3>
        You Have No Playlist Created. Create Some by Clicking +.
      </h3>
    </div>
    {/if}
  </div>
<style>
  .scrollable-container { 
    max-height: 750px;
    overflow-y: auto;
  }
  .playlistSummary a {
    color: #b3b3b3;
    text-transform: none;
    line-height: normal;
    font-family: CircularSp,CircularSp-Arab,CircularSp-Hebr,CircularSp-Cyrl,CircularSp-Grek,CircularSp-Deva,var(--fallback-fonts,sans-serif),sans-serif;
    -webkit-font-smoothing: antialiased;
    cursor: default;
    user-select: none;
    direction: inherit;
    visibility: visible;
    animation-delay: -1ms!important;
    animation-duration: 1ms!important;
    animation-iteration-count: 1!important;
    background-attachment: scroll!important;
    scroll-behavior: auto!important;
    transition-delay: 0s!important;
    transition-duration: 0s!important;
    box-sizing: border-box;
    border: 0;
    margin: 0;
    vertical-align: baseline;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-height: 100%;
    padding: 0 8px 8px;
  }
</style>

